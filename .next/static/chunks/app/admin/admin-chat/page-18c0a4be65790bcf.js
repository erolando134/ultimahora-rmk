(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4511],{30285:(e,r,a)=>{"use strict";a.d(r,{$:()=>o,r:()=>d});var s=a(95155),t=a(12115),n=a(99708),l=a(74466),i=a(59434);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background text-primary hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef((e,r)=>{let{className:a,variant:t,size:l,asChild:o=!1,...c}=e,m=o?n.DX:"button";return(0,s.jsx)(m,{className:(0,i.cn)(d({variant:t,size:l,className:a})),ref:r,...c})});o.displayName="Button"},48491:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>w});var s=a(95155),t=a(30285),n=a(66695),l=a(62523),i=a(12115),d=a(47655),o=a(59434);let c=i.forwardRef((e,r)=>{let{className:a,children:t,...n}=e;return(0,s.jsxs)(d.bL,{ref:r,className:(0,o.cn)("relative overflow-hidden",a),...n,children:[(0,s.jsx)(d.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(m,{}),(0,s.jsx)(d.OK,{})]})});c.displayName=d.bL.displayName;let m=i.forwardRef((e,r)=>{let{className:a,orientation:t="vertical",...n}=e;return(0,s.jsx)(d.VM,{ref:r,orientation:t,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,s.jsx)(d.lr,{className:"relative flex-1 rounded-full bg-border"})})});m.displayName=d.VM.displayName;var f=a(91394),x=a(94063),u=a(73503),p=a(91721),h=a(73672),v=a(12543),g=a(18186),N=a(6874),b=a.n(N),j=a(35695);function w(){let e=(0,j.useRouter)(),[r,a]=(0,i.useState)([{id:"internal_chat_1",participantName:"Elena Ramos (Supervisor)",participantId:"EMP001",lastMessageSnippet:"Revisado. Todo en orden por ahora.",avatarFallback:"ER",messages:[{id:"msg1",senderId:"admin",senderName:"Admin",text:"Elena, por favor revisa la actividad del ch\xf3fer DRV002.",timestamp:new Date(Date.now()-6e5)},{id:"msg2",senderId:"EMP001",senderName:"Elena Ramos",text:"Recibido. Lo estoy viendo ahora.",timestamp:new Date(Date.now()-3e5)},{id:"msg3",senderId:"EMP001",senderName:"Elena Ramos",text:"Revisado. Todo en orden por ahora.",timestamp:new Date(Date.now()-12e4)}]},{id:"internal_chat_2",participantName:"Marco Diaz (Supervisor)",participantId:"EMP002",lastMessageSnippet:"Ok, gracias.",avatarFallback:"MD",messages:[{id:"msg4",senderId:"admin",senderName:"Admin",text:"Marco, hay un pico de demanda en la Zona Sur, avisa a los ch\xf3feres cercanos si puedes.",timestamp:new Date(Date.now()-9e5)},{id:"msg5",senderId:"EMP002",senderName:"Marco Diaz",text:"Ok, gracias.",timestamp:new Date(Date.now()-84e4)}]}]),[d,o]=(0,i.useState)("internal_chat_1"),[m,N]=(0,i.useState)(""),w=(0,i.useRef)(null),[y,R]=(0,i.useState)(!1);(0,i.useEffect)(()=>{R(!0)},[]);let k=r.find(e=>e.id===d);(0,i.useEffect)(()=>{var e;null==(e=w.current)||e.scrollIntoView({behavior:"smooth"})},[null==k?void 0:k.messages]);let D=()=>{if(!d||!m.trim())return;let e={id:"msg-".concat(Date.now()),senderId:"admin",senderName:"Admin",text:m.trim(),timestamp:new Date};a(r=>r.map(r=>r.id===d?{...r,messages:[...r.messages,e],lastMessageSnippet:m.trim()}:r)),N("")};return(0,s.jsxs)("div",{className:"container mx-auto py-10 px-4 h-[calc(100vh-8rem)] flex flex-col",children:[(0,s.jsxs)(n.Zp,{className:"flex-grow flex flex-col shadow-xl overflow-hidden",children:[(0,s.jsxs)(n.aR,{className:"border-b",children:[(0,s.jsxs)(n.ZB,{className:"text-2xl font-bold flex items-center text-primary",children:[(0,s.jsx)(x.A,{className:"mr-3 h-7 w-7"}),"Chat Interno con Supervisores"]}),(0,s.jsx)(n.BT,{className:"text-md text-foreground/80",children:"Coordina tareas y comun\xedcate con tu equipo."})]}),(0,s.jsxs)("div",{className:"flex-grow flex overflow-hidden",children:[(0,s.jsx)("div",{className:"w-1/3 border-r bg-muted/50 overflow-y-auto",children:(0,s.jsx)(c,{className:"h-full p-2",children:(0,s.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,s.jsxs)(t.$,{variant:d===e.id?"secondary":"ghost",className:"w-full justify-start h-auto py-3",onClick:()=>o(e.id),children:[(0,s.jsx)(f.eu,{className:"mr-3 h-10 w-10",children:(0,s.jsx)(f.q5,{children:e.avatarFallback})}),(0,s.jsxs)("div",{className:"text-left flex-grow",children:[(0,s.jsx)("p",{className:"font-semibold text-sm",children:e.participantName}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate max-w-[150px]",children:e.lastMessageSnippet})]})]},e.id))})})}),(0,s.jsx)("div",{className:"w-2/3 flex flex-col",children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"p-4 border-b bg-card flex justify-between items-center",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(f.eu,{children:(0,s.jsx)(f.q5,{children:k.avatarFallback})}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"font-semibold text-lg",children:k.participantName})})]})}),(0,s.jsxs)(c,{className:"flex-grow min-h-0 p-4 space-y-4 bg-card",children:[k.messages.map(e=>(0,s.jsx)("div",{className:"flex ".concat("admin"===e.senderId?"justify-end":"justify-start"," mb-3"),children:(0,s.jsxs)("div",{className:"flex items-end max-w-[70%] space-x-2 ".concat("admin"===e.senderId?"flex-row-reverse":""),children:[(0,s.jsx)(f.eu,{className:"h-8 w-8",children:(0,s.jsx)(f.q5,{children:"admin"===e.senderId?(0,s.jsx)(u.A,{size:18}):(0,s.jsx)(p.A,{size:18})})}),(0,s.jsxs)("div",{className:"p-3 rounded-lg shadow-md ".concat("admin"===e.senderId?"bg-primary text-primary-foreground rounded-br-none":"bg-muted text-foreground rounded-bl-none"),children:[(0,s.jsx)("p",{className:"text-sm font-semibold mb-1",children:e.senderName}),(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.text}),y&&(0,s.jsx)("p",{className:"text-xs mt-1 ".concat("admin"===e.senderId?"text-primary-foreground/70":"text-muted-foreground/70"," ").concat("admin"===e.senderId?"text-right":"text-left"),children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},e.id)),(0,s.jsx)("div",{ref:w})]}),(0,s.jsx)(n.wL,{className:"p-4 border-t bg-background",children:(0,s.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,s.jsx)(l.p,{type:"text",placeholder:"Escribe un mensaje al supervisor...",value:m,onChange:e=>N(e.target.value),onKeyPress:e=>{"Enter"===e.key&&D()},className:"flex-grow"}),(0,s.jsxs)(t.$,{onClick:D,className:"btn-primary text-explicit-white",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 mr-0 md:mr-2"})," ",(0,s.jsx)("span",{className:"hidden md:inline",children:"Enviar"})]})]})})]}):(0,s.jsx)("div",{className:"flex-grow flex items-center justify-center text-muted-foreground",children:(0,s.jsx)("p",{children:"Selecciona un chat para ver la conversaci\xf3n."})})})]})]}),(0,s.jsxs)("div",{className:"mt-12 flex flex-col sm:flex-row justify-center items-center gap-4 border-t pt-6",children:[(0,s.jsxs)(t.$,{variant:"outline",onClick:()=>e.back(),children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Ir Atr\xe1s"]}),(0,s.jsx)(b(),{href:"/admin",passHref:!0,children:(0,s.jsxs)(t.$,{variant:"outline",children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Volver al Panel"]})})]})]})}},59434:(e,r,a)=>{"use strict";a.d(r,{cn:()=>n});var s=a(52596),t=a(39688);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.QP)((0,s.$)(r))}},61087:(e,r,a)=>{Promise.resolve().then(a.bind(a,48491))},62523:(e,r,a)=>{"use strict";a.d(r,{p:()=>l});var s=a(95155),t=a(12115),n=a(59434);let l=t.forwardRef((e,r)=>{let{className:a,type:t,...l}=e;return(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...l})});l.displayName="Input"},66695:(e,r,a)=>{"use strict";a.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>i,wL:()=>m});var s=a(95155),t=a(12115),n=a(59434);let l=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});l.displayName="Card";let i=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...t})});i.displayName="CardHeader";let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});d.displayName="CardTitle";let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",a),...t})});o.displayName="CardDescription";let c=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",a),...t})});c.displayName="CardContent";let m=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",a),...t})});m.displayName="CardFooter"},91394:(e,r,a)=>{"use strict";a.d(r,{BK:()=>d,eu:()=>i,q5:()=>o});var s=a(95155),t=a(12115),n=a(54011),l=a(59434);let i=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(n.bL,{ref:r,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t})});i.displayName=n.bL.displayName;let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(n._V,{ref:r,className:(0,l.cn)("aspect-square h-full w-full",a),...t})});d.displayName=n._V.displayName;let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(n.H4,{ref:r,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t})});o.displayName=n.H4.displayName}},e=>{e.O(0,[4277,6874,9234,8305,8441,5964,7358],()=>e(e.s=61087)),_N_E=e.O()}]);