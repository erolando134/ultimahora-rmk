(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7581],{9650:(e,a,r)=>{"use strict";let s;r.d(a,{yA:()=>c,j2:()=>u,db:()=>d,BV:()=>s,IG:()=>m});var t=r(23915),l=r(93004),n=r(35317),i=r(90858),o=r(20996);let c=0===(0,t.Dk)().length?(0,t.Wp)({apiKey:"AIzaSyBuA8vYdEeoAhtTkYz1mPfu8l_e8eIpeFY",authDomain:"ultimahora-8cdd7.firebaseapp.com",projectId:"ultimahora-8cdd7",storageBucket:"ultimahora-8cdd7.appspot.com",messagingSenderId:"64761922059",appId:"1:64761922059:web:97a111af73246f946e3d0e",measurementId:"G-E6QJLPFG3N"}):(0,t.Sx)(),u=(0,l.xI)(c),d=(0,n.aU)(c),m=(0,i.c7)(c);(0,o.TT)().then(e=>{if(e)try{s=(0,o.dG)(c)}catch(e){console.error("Error al iniciar Firebase Messaging:",e)}else console.warn("Firebase Messaging no soportado en este navegador.")}).catch(e=>{console.error("Error al verificar soporte de Messaging:",e)})},11243:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>o});var s=r(95155),t=r(84105),l=r(35695),n=r(12115);let i=[{label:"Dashboard",path:"/admin"},{label:"Empleados",path:"/admin/empleados"},{label:"Perfil",path:"/admin/perfil"}];function o(e){let{children:a}=e,{user:r,isAdmin:o,loading:c,logout:u}=(0,t.A)(),d=(0,l.useRouter)(),[m,h]=(0,n.useState)(null),[p,f]=(0,n.useState)("/admin");(0,n.useEffect)(()=>{if(!c){if(!r)return void d.replace("/login");if(!o){h("No tienes permisos para acceder a esta p\xe1gina."),setTimeout(()=>d.replace("/"),3e3);return}h(null)}},[c,r,o,d]);let g=async()=>{await u(),d.replace("/login")};return c?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsx)("p",{className:"text-gray-600 text-lg",children:"Cargando panel de administraci\xf3n..."})}):m?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen text-center p-4",children:[(0,s.jsx)("p",{className:"text-red-600 font-semibold mb-4",children:m}),(0,s.jsxs)("p",{className:"text-gray-500",children:["Si el redireccionamiento no ocurre, haz clic"," ",(0,s.jsx)("a",{href:"/",className:"text-blue-500 underline",children:"aqu\xed"}),"."]})]}):r&&o?(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsxs)("nav",{className:"w-64 bg-gray-800 text-white flex flex-col",children:[(0,s.jsx)("div",{className:"p-6 text-xl font-bold border-b border-gray-700",children:"Panel Admin"}),(0,s.jsx)("ul",{className:"flex-grow",children:i.map(e=>{let{label:a,path:r}=e;return(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:r,className:"block px-6 py-3 hover:bg-gray-700 ".concat(p===r?"bg-gray-700 font-semibold":""),onClick:e=>{e.preventDefault(),f(r),d.push(r)},children:a})},r)})}),(0,s.jsx)("button",{onClick:g,className:"p-4 bg-red-600 hover:bg-red-700 text-white font-semibold","aria-label":"Cerrar sesi\xf3n",children:"Logout"})]}),(0,s.jsx)("main",{className:"flex-grow bg-gray-50 p-6",children:a})]}):null}},35695:(e,a,r)=>{"use strict";var s=r(18999);r.o(s,"useParams")&&r.d(a,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(a,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(a,{useSearchParams:function(){return s.useSearchParams}})},62848:(e,a,r)=>{Promise.resolve().then(r.bind(r,11243))},84105:(e,a,r)=>{"use strict";r.d(a,{A:()=>c,O:()=>o});var s=r(95155),t=r(12115),l=r(9650),n=r(93004);let i=(0,t.createContext)(void 0),o=e=>{let{children:a}=e,[r,o]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[d,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{let e=(0,n.hg)(l.j2,async e=>{if(p(!0),e){o(e),u(["erolando134@gmail.com","ortegakarelia5@gmail.com"].includes(e.email||""));try{let a=await e.getIdTokenResult();m(!!a.claims.supervisor)}catch(e){console.error("Error getting supervisor claim:",e),m(!1)}}else o(null),u(!1),m(!1);p(!1)});return()=>e()},[]),(0,s.jsx)(i.Provider,{value:{user:r,isAdmin:c,isSupervisor:d,loading:h,login:(e,a)=>(0,n.x9)(l.j2,e,a),logout:()=>(0,n.CI)(l.j2)},children:a})},c=()=>{let e=(0,t.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[2992,7138,8248,9398,8441,5964,7358],()=>e(e.s=62848)),_N_E=e.O()}]);