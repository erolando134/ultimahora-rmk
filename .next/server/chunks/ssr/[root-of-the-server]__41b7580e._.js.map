{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LachiPro/Documents/UltimaHoraFirebase/src/lib/firebase/firebaseConfig.ts"],"sourcesContent":["export const firebaseConfig = {\r\n  apiKey: \"AIzaSyBuA8vYdEeoAhtTkYz1mPfu8l_e8eIpeFY\",\r\n  authDomain: \"ultimahora-8cdd7.firebaseapp.com\",\r\n  projectId: \"ultimahora-8cdd7\",\r\n  storageBucket: \"ultimahora-8cdd7.appspot.com\",\r\n  messagingSenderId: \"64761922059\",\r\n  appId: \"1:64761922059:web:97a111af73246f946e3d0e\",\r\n  measurementId: \"G-E6QJLPFG3N\"\r\n};\r\n"],"names":[],"mappings":";;;AAAO,MAAM,iBAAiB;IAC5B,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB","debugId":null}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LachiPro/Documents/UltimaHoraFirebase/src/lib/firebase/firebase.ts"],"sourcesContent":["// src/lib/firebase/firebase.ts\r\n\r\nimport { initializeApp, getApps, getApp, FirebaseApp } from \"firebase/app\";\r\nimport { getAuth, Auth } from \"firebase/auth\";\r\nimport { getFirestore, Firestore } from \"firebase/firestore\";\r\nimport { getStorage, FirebaseStorage } from \"firebase/storage\";\r\nimport { getMessaging, Messaging, isSupported as isMessagingSupported } from \"firebase/messaging\";\r\nimport { firebaseConfig } from \"./firebaseConfig\";\r\n\r\n// üî• Inicializa la app (solo si no est√° ya inicializada)\r\nconst app: FirebaseApp = getApps().length === 0 ? initializeApp(firebaseConfig) : getApp();\r\n\r\n// ‚úÖ Servicios principales\r\nconst auth: Auth = getAuth(app);\r\nconst db: Firestore = getFirestore(app);\r\nconst storage: FirebaseStorage = getStorage(app);\r\n\r\n// ‚úÖ Inicializar Messaging SOLO si est√° en navegador y soportado\r\nlet messaging: Messaging | undefined;\r\n\r\nif (typeof window !== \"undefined\") {\r\n  isMessagingSupported()\r\n    .then((supported) => {\r\n      if (supported) {\r\n        try {\r\n          messaging = getMessaging(app);\r\n        } catch (error) {\r\n          console.error(\"Error al iniciar Firebase Messaging:\", error);\r\n        }\r\n      } else {\r\n        console.warn(\"Firebase Messaging no soportado en este navegador.\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Error al verificar soporte de Messaging:\", err);\r\n    });\r\n}\r\n\r\n// ‚úÖ Exportar servicios\r\nexport { app, auth, db, storage, messaging };\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;;AAE/B;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;;;;;;;AAEA,yDAAyD;AACzD,MAAM,MAAmB,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,KAAK,IAAI,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE,wIAAA,CAAA,iBAAc,IAAI,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;AAEvF,0BAA0B;AAC1B,MAAM,OAAa,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE;AAC3B,MAAM,KAAgB,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;AACnC,MAAM,UAA2B,CAAA,GAAA,oLAAA,CAAA,aAAU,AAAD,EAAE;AAE5C,gEAAgE;AAChE,IAAI;AAEJ","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LachiPro/Documents/UltimaHoraFirebase/src/hooks/useAuth.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, createContext, useContext, ReactNode } from 'react';\r\nimport { auth } from '@/lib/firebase/firebase';\r\nimport { onAuthStateChanged, User, signInWithEmailAndPassword, signOut } from 'firebase/auth';\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  isAdmin: boolean;\r\n  isSupervisor: boolean; \r\n  loading: boolean;\r\n  login: (email: string, pass: string) => Promise<any>;\r\n  logout: () => Promise<any>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isAdmin, setIsAdmin] = useState<boolean>(false);\r\n  const [isSupervisor, setIsSupervisor] = useState<boolean>(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      setLoading(true);\r\n\r\n      if (user) {\r\n        setUser(user);\r\n\r\n        // ‚úÖ Verificar si el correo es de un administrador permitido\r\n        const allowedAdmins = ['erolando134@gmail.com', 'ortegakarelia5@gmail.com'];\r\n        const isHardcodedAdmin = allowedAdmins.includes(user.email || '');\r\n        setIsAdmin(isHardcodedAdmin);\r\n\r\n        // Verificaci√≥n de supervisor con claims si se usa\r\n        try {\r\n          const tokenResult = await user.getIdTokenResult();\r\n          setIsSupervisor(!!tokenResult.claims.supervisor);\r\n        } catch (error) {\r\n          console.error(\"Error getting supervisor claim:\", error);\r\n          setIsSupervisor(false);\r\n        }\r\n\r\n      } else {\r\n        setUser(null);\r\n        setIsAdmin(false);\r\n        setIsSupervisor(false);\r\n      }\r\n\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const login = (email: string, pass: string) => {\r\n    return signInWithEmailAndPassword(auth, email, pass);\r\n  };\r\n\r\n  const logout = () => {\r\n    return signOut(auth);\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    isAdmin,\r\n    isSupervisor,\r\n    loading,\r\n    login,\r\n    logout,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAJA;;;;;AAeA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAChD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,cAAc,CAAA,GAAA,oPAAA,CAAA,qBAAkB,AAAD,EAAE,kIAAA,CAAA,OAAI,EAAE,OAAO;YAClD,WAAW;YAEX,IAAI,MAAM;gBACR,QAAQ;gBAER,4DAA4D;gBAC5D,MAAM,gBAAgB;oBAAC;oBAAyB;iBAA2B;gBAC3E,MAAM,mBAAmB,cAAc,QAAQ,CAAC,KAAK,KAAK,IAAI;gBAC9D,WAAW;gBAEX,kDAAkD;gBAClD,IAAI;oBACF,MAAM,cAAc,MAAM,KAAK,gBAAgB;oBAC/C,gBAAgB,CAAC,CAAC,YAAY,MAAM,CAAC,UAAU;gBACjD,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,mCAAmC;oBACjD,gBAAgB;gBAClB;YAEF,OAAO;gBACL,QAAQ;gBACR,WAAW;gBACX,gBAAgB;YAClB;YAEA,WAAW;QACb;QAEA,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAC,OAAe;QAC5B,OAAO,CAAA,GAAA,6PAAA,CAAA,6BAA0B,AAAD,EAAE,kIAAA,CAAA,OAAI,EAAE,OAAO;IACjD;IAEA,MAAM,SAAS;QACb,OAAO,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE,kIAAA,CAAA,OAAI;IACrB;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LachiPro/Documents/UltimaHoraFirebase/src/app/admin/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\n\r\ninterface MenuItem {\r\n  label: string;\r\n  path: string;\r\n}\r\n\r\nconst MENU_ITEMS: MenuItem[] = [\r\n  { label: 'Dashboard', path: '/admin' },\r\n  { label: 'Empleados', path: '/admin/empleados' },\r\n  { label: 'Perfil', path: '/admin/perfil' },\r\n];\r\n\r\nexport default function AdminLayout({ children }: { children: React.ReactNode }) {\r\n  const { user, isAdmin, loading, logout } = useAuth();\r\n  const router = useRouter();\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [activePath, setActivePath] = useState<string>('/admin');\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      if (!user) {\r\n        // Si no hay usuario, redirigir sin mostrar mensaje de error\r\n        router.replace('/login');\r\n        return;\r\n      }\r\n\r\n      if (!isAdmin) {\r\n        // Usuario sin permisos\r\n        setError('No tienes permisos para acceder a esta p√°gina.');\r\n        setTimeout(() => router.replace('/'), 3000);\r\n        return;\r\n      }\r\n\r\n      setError(null);\r\n    }\r\n  }, [loading, user, isAdmin, router]);\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    router.replace('/login');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <p className=\"text-gray-600 text-lg\">Cargando panel de administraci√≥n...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-screen text-center p-4\">\r\n        <p className=\"text-red-600 font-semibold mb-4\">{error}</p>\r\n        <p className=\"text-gray-500\">\r\n          Si el redireccionamiento no ocurre, haz clic{' '}\r\n          <a href=\"/\" className=\"text-blue-500 underline\">aqu√≠</a>.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Solo renderizar el panel si usuario autenticado y es admin\r\n  if (!user || !isAdmin) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen\">\r\n      {/* Sidebar */}\r\n      <nav className=\"w-64 bg-gray-800 text-white flex flex-col\">\r\n        <div className=\"p-6 text-xl font-bold border-b border-gray-700\">Panel Admin</div>\r\n        <ul className=\"flex-grow\">\r\n          {MENU_ITEMS.map(({ label, path }) => (\r\n            <li key={path}>\r\n              <a\r\n                href={path}\r\n                className={`block px-6 py-3 hover:bg-gray-700 ${\r\n                  activePath === path ? 'bg-gray-700 font-semibold' : ''\r\n                }`}\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  setActivePath(path);\r\n                  router.push(path);\r\n                }}\r\n              >\r\n                {label}\r\n              </a>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <button\r\n          onClick={handleLogout}\r\n          className=\"p-4 bg-red-600 hover:bg-red-700 text-white font-semibold\"\r\n          aria-label=\"Cerrar sesi√≥n\"\r\n        >\r\n          Logout\r\n        </button>\r\n      </nav>\r\n\r\n      {/* Main content */}\r\n      <main className=\"flex-grow bg-gray-50 p-6\">{children}</main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAWA,MAAM,aAAyB;IAC7B;QAAE,OAAO;QAAa,MAAM;IAAS;IACrC;QAAE,OAAO;QAAa,MAAM;IAAmB;IAC/C;QAAE,OAAO;QAAU,MAAM;IAAgB;CAC1C;AAEc,SAAS,YAAY,EAAE,QAAQ,EAAiC;IAC7E,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,wHAAA,CAAA,UAAO,AAAD;IACjD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAErD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS;YACZ,IAAI,CAAC,MAAM;gBACT,4DAA4D;gBAC5D,OAAO,OAAO,CAAC;gBACf;YACF;YAEA,IAAI,CAAC,SAAS;gBACZ,uBAAuB;gBACvB,SAAS;gBACT,WAAW,IAAM,OAAO,OAAO,CAAC,MAAM;gBACtC;YACF;YAEA,SAAS;QACX;IACF,GAAG;QAAC;QAAS;QAAM;QAAS;KAAO;IAEnC,MAAM,eAAe;QACnB,MAAM;QACN,OAAO,OAAO,CAAC;IACjB;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAAmC;;;;;;8BAChD,8OAAC;oBAAE,WAAU;;wBAAgB;wBACkB;sCAC7C,8OAAC;4BAAE,MAAK;4BAAI,WAAU;sCAA0B;;;;;;wBAAQ;;;;;;;;;;;;;IAIhE;IAEA,6DAA6D;IAC7D,IAAI,CAAC,QAAQ,CAAC,SAAS;QACrB,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAiD;;;;;;kCAChE,8OAAC;wBAAG,WAAU;kCACX,WAAW,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,iBAC9B,8OAAC;0CACC,cAAA,8OAAC;oCACC,MAAM;oCACN,WAAW,CAAC,kCAAkC,EAC5C,eAAe,OAAO,8BAA8B,IACpD;oCACF,SAAS,CAAC;wCACR,EAAE,cAAc;wCAChB,cAAc;wCACd,OAAO,IAAI,CAAC;oCACd;8CAEC;;;;;;+BAZI;;;;;;;;;;kCAiBb,8OAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCACZ;;;;;;;;;;;;0BAMH,8OAAC;gBAAK,WAAU;0BAA4B;;;;;;;;;;;;AAGlD","debugId":null}}]
}